<?php defined('IN_ADMIN') or die("not here"); // make vsc fmt happy ?>
<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Admin Panel</title>

    <link rel="stylesheet" href="bootstrap-5.3.1/css/bootstrap.min.css?v=c24439e7a4bbb5d8782a14cd4e1cd4a0">

    <script src="../js/jquery-3.6.4.min.js?v=954f70f07f05742168adceba796dda72"></script>
    <script src="../js/jquery.cookie.min.js?v=34f2c35185e06a0fad464f954b00d3dc"></script>
    <script src="../js/layer.min.js?v=7cdb23d7e49febe634c90bcd40470bea"></script>

    <script src="bootstrap-5.3.1/js/bootstrap.min.js?v=6238f01f41a10bf7282287b6f3ea2fdd"></script>

    <!-- 引入 admin.js -->
    <script src="js/admin.js?v=16b4404ff64a434b5726e98dc36aa61c"></script>
    <!-- 引入 admin.css -->
    <link rel="stylesheet" type="text/css" href="css/admin.css?v=dcd3323415bb9722c8116a267fc7a90e">
    <?php echo "<script>var user = " . json_encode($_SESSION['user']) . ";</script>"; ?>
    <?php echo "<script>var result = " . json_encode($jsResult) . ";</script>"; ?>
</head>

<body>
    <div class="login-area">
        <h4 id="welcome"></h4>
        <a class="btn" id="login" href="adminxlogin.php">登录</a>
        <a class="btn" id="logout" style="display: none;" href="adminxlogin.php?action=logout">登出</a>
    </div>

    <?php include 'block_nav.html'; ?>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <canvas id="myChart"></canvas>

    <script>
        const ctx = document.getElementById('myChart');
        const labels = result.map(entry => entry.date); // 使用从PHP获取的日期数据
        const data = {
            labels: labels,
            datasets: [{
                label: '用户数量',
                data: result.map(entry => entry.count), // 使用从PHP获取的数量数据
                fill: false,
                borderColor: 'rgb(75, 192, 192)',
                tension: 0.1
            }]
        };
        const config = {
            type: 'line',
            data: data,
        };
        const myChart = new Chart(ctx, config);
    </script>

</body>

</html>